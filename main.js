/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var e=document.querySelector("#card-template").content;function t(t){var n=t.cardData,r=t.onDelete,o=t.onLike,c=t.onImageClick,i=e.querySelector(".card").cloneNode(!0),a=i.querySelector(".card__image"),u=i.querySelector(".card__title"),p=i.querySelector(".card__delete-button"),l=i.querySelector(".card__like-button");return a.src=n.link,a.alt=n.name,u.textContent=n.name,p.addEventListener("click",(function(){return r(i)})),l.addEventListener("click",(function(){return o(l)})),a.addEventListener("click",(function(){return c(a,u)})),i}function n(e){e.remove()}function r(e){e.classList.toggle("card__like-button_is-active")}function o(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,o,i){var a=r&&r.prototype instanceof p?r:p,l=Object.create(a.prototype);return c(l,"_invoke",function(n,r,o){var c,i,a,p=0,l=o||[],s=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,i=0,a=e,d.n=n,u}};function f(n,r){for(i=n,a=r,t=0;!s&&p&&!o&&t<l.length;t++){var o,c=l[t],f=d.p,v=c[2];n>3?(o=v===r)&&(a=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=e):c[0]<=f&&((o=n<2&&f<c[1])?(i=0,d.v=r,d.n=c[1]):f<v&&(o=n<3||c[0]>r||r>v)&&(c[4]=n,c[5]=r,d.n=v,i=0))}if(o||n>1)return u;throw s=!0,r}return function(o,l,v){if(p>1)throw TypeError("Generator is already running");for(s&&1===l&&f(l,v),i=l,a=v;(t=i<2?e:a)||!s;){c||(i?i<3?(i>1&&(d.n=-1),f(i,a)):d.n=a:d.v=a);try{if(p=2,c){if(i||(o="next"),t=c[o]){if(!(t=t.call(c,a)))throw TypeError("iterator result is not an object");if(!t.done)return t;a=t.value,i<2&&(i=0)}else 1===i&&(t=c.return)&&t.call(c),i<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),i=1);c=e}else if((t=(s=d.n<0)?a:n.call(r,d))!==u)break}catch(t){c=e,i=1,a=t}finally{p=1}}return{value:t,done:s}}}(n,o,i),!0),l}var u={};function p(){}function l(){}function s(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(c(t={},r,(function(){return this})),t),f=s.prototype=p.prototype=Object.create(d);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,c(e,i,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=s,c(f,"constructor",s),c(s,"constructor",l),l.displayName="GeneratorFunction",c(s,i,"GeneratorFunction"),c(f),c(f,i,"Generator"),c(f,r,(function(){return this})),c(f,"toString",(function(){return"[object Generator]"})),(o=function(){return{w:a,m:v}})()}function c(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}c=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{function i(t,n){c(e,t,(function(e){return this._invoke(t,n,e)}))}i("next",0),i("throw",1),i("return",2)}},c(e,t,n,r)}function i(e,t,n,r,o,c,i){try{var a=e[c](i),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,o)}var a=document.querySelector(".content").querySelector(".places__list"),u=document.querySelector(".profile__edit-button"),p=document.querySelector(".profile__add-button"),l=document.querySelector(".popup_type_new-card"),s=document.querySelector(".profile__title"),d=document.querySelector(".profile__description"),f=document.querySelector(".popup_type_edit"),v=document.forms["edit-profile"],_=document.forms["new-place"],y=v.querySelector(".popup__input_type_name"),m=v.querySelector(".popup__input_type_description"),g=_.querySelector(".popup__input_type_card-name"),h=_.querySelector(".popup__input_type_url"),S=document.querySelectorAll(".popup");function k(e){e.classList.add("popup_is-animated"),setTimeout((function(){e.classList.add("popup_is-opened")}),1),document.addEventListener("keydown",q)}function b(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",q)}function q(e){if("Escape"===e.key){var t=document.querySelector(".popup_is-opened");t&&b(t)}}function E(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=function(){return n(new Error("Ошибка загрузки изображения: ".concat(e)))},r.src=e}))}function L(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.querySelector(".popup_type_image");n.querySelector(".popup__image").src=e.src,n.querySelector(".popup__image").alt=e.alt,n.querySelector(".popup__caption").textContent=t.textContent,k(n)}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){var o=t({cardData:e,onDelete:n,onLike:r,onImageClick:L});a.append(o)})),u.addEventListener("click",(function(){var e;e=[s,d],[y,m].forEach((function(t,n){t.value=e[n].textContent}));var t=f.querySelector(".popup__form_set"),n=Array.from(t.querySelectorAll(".popup__input")),r=t.querySelector(".popup__button");n.forEach((function(e){x(t,e)})),w(n,r),k(f)})),v.addEventListener("submit",(function(e){e.preventDefault(),s.textContent=y.value,d.textContent=m.value,b(f)})),p.addEventListener("click",(function(){k(l)})),_.addEventListener("submit",function(){var e,c=(e=o().m((function e(c){var i,u,p,s;return o().w((function(e){for(;;)switch(e.n){case 0:return c.preventDefault(),i={name:g.value,link:h.value},e.p=1,e.n=2,E(i.link);case 2:b(l),_.reset(),u=t({cardData:i,onDelete:n,onLike:r,onImageClick:L}),a.prepend(u),e.n=4;break;case 3:e.p=3,s=e.v,console.error(s),(p=document.createElement("div")).classList.add("error-message"),p.textContent="Не удалось загрузить изображение",_.appendChild(p),setTimeout((function(){_.contains(p)&&_.removeChild(p)}),3e3);case 4:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var c=e.apply(t,n);function a(e){i(c,r,o,a,u,"next",e)}function u(e){i(c,r,o,a,u,"throw",e)}a(void 0)}))});return function(e){return c.apply(this,arguments)}}()),S.forEach((function(e){e.addEventListener("click",(function(t){(t.target===e||t.target.classList.contains("popup__close"))&&b(e)}))}));var x=function(e,t){console.log("validity.patternMismatch -",t.validity.patternMismatch),t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),console.log("valid - ",t.validity.valid),t.validity.valid?function(e,t){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("form__input_type_error"),n.classList.remove("form__input-error"),n.textContent=""}(e,t):function(e,t,n){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.add("form__input_type_error"),r.textContent=n,r.classList.add("form__input-error")}(e,t,t.validationMessage),console.groupEnd()},w=function(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.classList.remove("popup__button_inactive"),t.removeAttribute("disabled","")):(t.classList.add("popup__button_inactive"),t.setAttribute("disabled",""))};Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),Array.from(e.querySelectorAll(".popup__form_set")).forEach((function(e){!function(e){var t=Array.from(e.querySelectorAll(".popup__input")),n=e.querySelector(".popup__button");w(t,n),t.forEach((function(r){r.addEventListener("input",(function(o){console.group("input"),o instanceof InputEvent?console.log("InputEvent! Тип действия:",o.inputType):o instanceof Event&&console.log("Базовое Event"),console.log("e.type",o.inputType),console.log('inputElement.value "'.concat(r.value,'"')),console.log(o),console.log("e.data - ",o.data),x(e,r),w(t,n)}))}))}(e)}))}))})();
//# sourceMappingURL=main.js.map