/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var e=document.querySelector("#card-template").content;function t(t){var n=t.cardData,r=t.onDelete,o=t.onLike,c=t.onImageClick,i=e.querySelector(".card").cloneNode(!0),u=i.querySelector(".card__image"),a=i.querySelector(".card__title"),p=i.querySelector(".card__delete-button"),l=i.querySelector(".card__like-button");return u.src=n.link,u.alt=n.name,a.textContent=n.name,p.addEventListener("click",(function(){return r(i)})),l.addEventListener("click",(function(){return o(l)})),u.addEventListener("click",(function(){return c(u,a)})),i}function n(e){e.remove()}function r(e){e.classList.toggle("card__like-button_is-active")}function o(e){e.classList.add("popup_is-animated"),setTimeout((function(){e.classList.add("popup_is-opened")}),1),document.addEventListener("keydown",i)}function c(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",i)}function i(e){if("Escape"===e.key){var t=document.querySelector(".popup_is-opened");t&&c(t)}}function u(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function c(n,r,o,c){var u=r&&r.prototype instanceof p?r:p,l=Object.create(u.prototype);return a(l,"_invoke",function(n,r,o){var c,u,a,p=0,l=o||[],s=!1,d={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return c=t,u=0,a=e,d.n=n,i}};function f(n,r){for(u=n,a=r,t=0;!s&&p&&!o&&t<l.length;t++){var o,c=l[t],f=d.p,y=c[2];n>3?(o=y===r)&&(a=c[(u=c[4])?5:(u=3,3)],c[4]=c[5]=e):c[0]<=f&&((o=n<2&&f<c[1])?(u=0,d.v=r,d.n=c[1]):f<y&&(o=n<3||c[0]>r||r>y)&&(c[4]=n,c[5]=r,d.n=y,u=0))}if(o||n>1)return i;throw s=!0,r}return function(o,l,y){if(p>1)throw TypeError("Generator is already running");for(s&&1===l&&f(l,y),u=l,a=y;(t=u<2?e:a)||!s;){c||(u?u<3?(u>1&&(d.n=-1),f(u,a)):d.n=a:d.v=a);try{if(p=2,c){if(u||(o="next"),t=c[o]){if(!(t=t.call(c,a)))throw TypeError("iterator result is not an object");if(!t.done)return t;a=t.value,u<2&&(u=0)}else 1===u&&(t=c.return)&&t.call(c),u<2&&(a=TypeError("The iterator does not provide a '"+o+"' method"),u=1);c=e}else if((t=(s=d.n<0)?a:n.call(r,d))!==i)break}catch(t){c=e,u=1,a=t}finally{p=1}}return{value:t,done:s}}}(n,o,c),!0),l}var i={};function p(){}function l(){}function s(){}t=Object.getPrototypeOf;var d=[][r]?t(t([][r]())):(a(t={},r,(function(){return this})),t),f=s.prototype=p.prototype=Object.create(d);function y(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,a(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return l.prototype=s,a(f,"constructor",s),a(s,"constructor",l),l.displayName="GeneratorFunction",a(s,o,"GeneratorFunction"),a(f),a(f,o,"Generator"),a(f,r,(function(){return this})),a(f,"toString",(function(){return"[object Generator]"})),(u=function(){return{w:c,m:y}})()}function a(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{function c(t,n){a(e,t,(function(e){return this._invoke(t,n,e)}))}c("next",0),c("throw",1),c("return",2)}},a(e,t,n,r)}function p(e,t,n,r,o,c,i){try{var u=e[c](i),a=u.value}catch(e){return void n(e)}u.done?t(a):Promise.resolve(a).then(r,o)}var l=document.querySelector(".content").querySelector(".places__list"),s=document.querySelector(".profile__edit-button"),d=document.querySelector(".profile__add-button"),f=document.querySelector(".popup_type_new-card"),y=document.querySelector(".profile__title"),m=document.querySelector(".profile__description"),v=document.querySelector(".popup_type_edit"),_=document.forms["edit-profile"],k=document.forms["new-place"],h=_.querySelector(".popup__input_type_name"),g=_.querySelector(".popup__input_type_description"),S=k.querySelector(".popup__input_type_card-name"),b=k.querySelector(".popup__input_type_url"),q=document.querySelectorAll(".popup");function E(e){return new Promise((function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=function(){return n(new Error("Ошибка загрузки изображения: ".concat(e)))},r.src=e}))}function L(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.querySelector(".popup_type_image");n.querySelector(".popup__image").src=e.src,n.querySelector(".popup__image").alt=e.alt,n.querySelector(".popup__caption").textContent=t.textContent,o(n)}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){var o=t({cardData:e,onDelete:n,onLike:r,onImageClick:L});l.append(o)})),s.addEventListener("click",(function(){var e;e=[y,m],[h,g].forEach((function(t,n){t.value=e[n].textContent})),o(v)})),_.addEventListener("submit",(function(e){e.preventDefault(),y.textContent=h.value,m.textContent=g.value,c(v)})),d.addEventListener("click",(function(){o(f)})),k.addEventListener("submit",function(){var e,o=(e=u().m((function e(o){var i,a,p,s;return u().w((function(e){for(;;)switch(e.n){case 0:return o.preventDefault(),i={name:S.value,link:b.value},e.p=1,e.n=2,E(i.link);case 2:c(f),k.reset(),a=t({cardData:i,onDelete:n,onLike:r,onImageClick:L}),l.prepend(a),e.n=4;break;case 3:e.p=3,s=e.v,console.error(s),(p=document.createElement("div")).classList.add("error-message"),p.textContent="Не удалось загрузить изображение",k.appendChild(p),setTimeout((function(){k.contains(p)&&k.removeChild(p)}),3e3);case 4:return e.a(2)}}),e,null,[[1,3]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var c=e.apply(t,n);function i(e){p(c,r,o,i,u,"next",e)}function u(e){p(c,r,o,i,u,"throw",e)}i(void 0)}))});return function(e){return o.apply(this,arguments)}}()),q.forEach((function(e){e.addEventListener("click",(function(t){(t.target===e||t.target.classList.contains("popup__close"))&&c(e)}))}))})();
//# sourceMappingURL=main.js.map