{"version":3,"file":"main.js","mappings":"mBAAA,IAAMA,EAAS,CACbC,QAAS,4CACTC,QAAS,CACPC,cAAe,uCACf,eAAgB,qBAgBdC,EAAc,SAACC,GACnB,OAAIA,EAAIC,GACCD,EAAIE,OAENC,QAAQC,OAAO,UAADC,OAAWL,EAAIM,QACtC,ECvBMC,EAAeC,SAASC,cAAc,kBAAkBC,QAE9D,SAASC,EAAUC,GAA+C,IAA5CC,EAAQD,EAARC,SAAUC,EAAQF,EAARE,SAAUC,EAAMH,EAANG,OAAQC,EAAYJ,EAAZI,aAC1CC,EAAcV,EAAaE,cAAc,SAASS,WAAU,GAC5DC,EAAYF,EAAYR,cAAc,gBACtCW,EAAYH,EAAYR,cAAc,gBACtCY,EAAeJ,EAAYR,cAAc,wBACzCa,EAAaL,EAAYR,cAAc,sBAEvCc,EAAaN,EAAYR,cAAc,qBAuB7C,OArBAU,EAAUK,IAAMX,EAASY,KACzBN,EAAUO,IAAMb,EAASc,KACzBP,EAAUQ,YAAcf,EAASc,KACjCJ,EAAWK,YAAcf,EAASgB,MAAMC,OAExCR,EAAWS,iBAAiB,SAAS,kBAAMhB,EAAOO,EAAYT,EAASmB,GAAIT,EAAW,IACtFJ,EAAUY,iBAAiB,SAAS,kBAAMf,EAAaG,EAAWC,EAAU,IAExDP,EAASgB,MAAMI,MAAK,SAACC,GACvC,OAAOA,EAAKC,MAAQtB,EAASuB,MAC/B,KAGEd,EAAWe,UAAUC,IAAI,+BAGvBzB,EAAS0B,UAAY1B,EAASuB,OAChCf,EAAamB,SAEbnB,EAAaU,iBAAiB,SAAS,kBAAMjB,EAASG,EAAaJ,EAASmB,GAAG,IAE1Ef,CACT,CAEA,SAASwB,EAAWxB,EAAayB,IDuBJ,SAACA,GAC5B,OAAOC,MAAM,GAADtC,OAAIV,EAAOC,QAAO,WAAAS,OAAUqC,GAAU,CAChDE,OAAQ,SACR/C,QAASF,EAAOE,UACfgD,KAAK9C,EACV,EC3BE+C,CAAcJ,GACXG,MAAK,WACJ5B,EAAYuB,QACd,IACCO,OAAM,SAACC,GACNC,QAAQC,IAAI,iCAAD7C,OAAkC2C,GAC/C,GACJ,CAEA,SAASG,EAAS7B,EAAYoB,EAAQnB,IDIZ,SAACmB,EAAQU,GACjC,IAAMR,EAASQ,EAAU,SAAW,MAEpC,OAAOT,MAAM,GAADtC,OAAIV,EAAOC,QAAO,iBAAAS,OAAgBqC,GAAU,CACtDE,OAAAA,EACA/C,QAASF,EAAOE,UACfgD,KAAK9C,EACV,ECREsD,CAAWX,EAFKpB,EAAWe,UAAUiB,SAAS,gCAG3CT,MAAK,SAACU,GACLjC,EAAWe,UAAUmB,OAAO,+BAC5BjC,EAAWK,YAAc2B,EAAY1B,MAAMC,MAC7C,IACCiB,OAAM,SAACC,GAAG,OAAKC,QAAQC,IAAIF,EAAI,GACpC,CCtDA,IAOMS,EAAiB,SAACC,EAAaC,EAAcC,GACjD,IAAMC,EAAeH,EAAYjD,cAAc,IAADJ,OAAKsD,EAAa3B,GAAE,WAClE2B,EAAatB,UAAUG,OAAOoB,EAAiBE,iBAC/CD,EAAaxB,UAAUG,OAAOoB,EAAiBG,YAC/CF,EAAajC,YAAc,EAC7B,EA6CMoC,EAAoB,SAACC,EAAUL,GACnC,IAAMM,EAAYC,MAAMC,KAAKH,EAASI,iBAAiBT,EAAiBU,gBAClEC,EAAgBN,EAASxD,cAAcmD,EAAiBY,uBARxC,SAACN,GACvB,OAAOA,EAAUjC,MAAK,SAAC0B,GACrB,OAAQA,EAAac,SAASC,KAChC,GACF,CAKMC,CAAgBT,IAIlBK,EAAclC,UAAUG,OAAOoB,EAAiBgB,qBAChDL,EAAcM,UAAW,IAJzBN,EAAclC,UAAUC,IAAIsB,EAAiBgB,qBAC7CL,EAAcM,UAAW,EAK7B,EAEMC,EAAkB,SAACC,EAAOnB,GAC9B,IAAMK,EAAWc,EAAMtE,cAAc,oBACnB0D,MAAMC,KAAKW,EAAMV,iBAAiBT,EAAiBU,gBAC3DU,SAAQ,SAACrB,GACjBF,EAAeQ,EAAUN,EAAcC,EACzC,IACAI,EAAkBC,EAAUL,EAC9B,E,sGClEA,IACMqB,EADYzE,SAASC,cAAc,YACRA,cAAc,iBACzCyE,EAAoB1E,SAASC,cAAc,yBAC3C0E,EAAmB3E,SAASC,cAAc,wBAC1C2E,EAAkB5E,SAASC,cAAc,wBACzC4E,EAAe7E,SAASC,cAAc,mBACtC6E,EAAqB9E,SAASC,cAAc,yBAC5C8E,EAAmB/E,SAASC,cAAc,oBAC1C+E,EAAkBhF,SAASiF,MAAM,gBACjCC,EAAiBlF,SAASiF,MAAM,aAChCE,EAAYH,EAAgB/E,cAAc,2BAC1CmF,EAAmBJ,EAAgB/E,cAAc,kCACjDoF,EAAaH,EAAejF,cAAc,gCAC1CqF,EAAWJ,EAAejF,cAAc,0BACxCsF,EAAavF,SAAS6D,iBAAiB,UAEvC2B,EAAkBxF,SAASC,cAAc,sBACzCwF,EAAkBD,EAAgBvF,cAAc,6BAChDyF,EAAiB1F,SAASiF,MAAM,eAChCU,EAAgB3F,SAASC,cAAc,mBACzC2F,EAAgB,KAEdxC,EAAmB,CACvByC,aAAc,eACd/B,cAAe,gBACfE,qBAAsB,iBACtBI,oBAAqB,yBACrBd,gBAAiB,0BACjBC,WAAY,wBA8Cd,SAASuC,EAAUvB,GACjBA,EAAM1C,UAAUC,IAAI,qBACpBiE,YAAW,WACTxB,EAAM1C,UAAUC,IAAI,kBACtB,GAAG,GACH9B,SAASuB,iBAAiB,UAAWyE,EACvC,CAEA,SAASC,EAAW1B,GAClBA,EAAM1C,UAAUG,OAAO,mBACvBhC,SAASkG,oBAAoB,UAAWF,EAC1C,CAEA,SAASA,EAAeG,GACtB,GAAc,WAAVA,EAAEC,IAAkB,CACtB,IAAM7B,EAAQvE,SAASC,cAAc,oBACjCsE,GACF0B,EAAW1B,EAEf,CACF,CA6FA,SAAS8B,EAAcC,EAAKC,GAA4D,IAArDhC,EAAKiC,UAAAlF,OAAA,QAAAmF,IAAAD,UAAA,GAAAA,UAAA,GAAGxG,SAASC,cAAc,qBAChEsE,EAAMtE,cAAc,iBAAiBe,IAAMsF,EAAItF,IAC/CuD,EAAMtE,cAAc,iBAAiBiB,IAAMoF,EAAIpF,IAC/CqD,EAAMtE,cAAc,mBAAmBmB,YAAcmF,EAAMnF,YAC3D0E,EAAUvB,EACZ,CAjJA5E,QAAQ+G,IAAI,CHlDHvE,MAAM,GAADtC,OAAIV,EAAOC,QAAO,aAAa,CACzCC,QAASF,EAAOE,UACfgD,KAAK9C,GAID4C,MAAM,GAADtC,OAAIV,EAAOC,QAAO,UAAU,CACtCC,QAASF,EAAOE,UACfgD,KAAK9C,KG2CP8C,MAAK,SAAAjC,GAA8B,I,IAAAuG,G,EAAA,E,4CAAAvG,I,s1BAA5BwG,EAAQD,EAAA,GAAEE,EAAYF,EAAA,GAC5B9B,EAAazD,YAAcwF,EAASzF,KACpC2D,EAAmB1D,YAAcwF,EAASE,MAC1CnB,EAAcoB,MAAMC,gBAAkB,OAAHnH,OAAU+G,EAASK,OAAM,KAC5DrB,EAAgBgB,EAASjF,IAEzBkF,EAAarC,SAAQ,SAAC0C,GACpB,IAQMC,EAAUhH,EAAW,CACzBE,SATe,CACfmB,GAAI0F,EAAKvF,IACTI,QAASmF,EAAKE,MAAMzF,IACpBC,OAAQgE,EACRzE,KAAM+F,EAAK/F,KACXF,KAAMiG,EAAKjG,KACXI,MAAO6F,EAAK7F,OAIZf,SAAU2B,EACV1B,OAAQoC,EACRnC,aAAc6F,IAEhB5B,EAAe4C,OAAOF,EACxB,GACF,IACC5E,OAAM,SAACC,GAAG,OAAKC,QAAQC,IAAIF,EAAI,IAwBlCkC,EAAkBnD,iBAAiB,SAAS,WAjE5C,IAA+B+F,IAkEW,CAACzC,EAAcC,GAA9C,CAACK,EAAWC,GAjETZ,SAAQ,SAAC+C,EAAOC,GAC1BD,EAAME,MAAQH,EAAUE,GAAOpG,WACjC,IAgEAkD,EAAgBS,EAAkB3B,GAClC0C,EAAUf,EACZ,IAoBAJ,EAAiBpD,iBAAiB,SAAS,WACzC+C,EAAgBM,EAAiBxB,GACjC0C,EAAUlB,EACZ,IAmCAe,EAAcpE,iBAAiB,SAAS,WACtC+C,EAAgBkB,EAAiBpC,GACjC0C,EAAUN,EACZ,IAkBAD,EAAWf,SAAQ,SAACD,GAClBA,EAAMhD,iBAAiB,aAAa,SAAC4E,IAC/BA,EAAEuB,SAAWnD,GAAS4B,EAAEuB,OAAO7F,UAAUiB,SAAS,kBACpDmD,EAAW1B,EAEf,GACF,IASA,IAAMoD,EAAgB,SAACC,EAAW1E,GAChC,IAAMa,EAAgBb,EAAYjD,cAAcmD,EAAiBY,sBAC7D4D,GACF7D,EAAc8D,aAAa,YAAa9D,EAAc3C,aACtD2C,EAAc3C,YAAc,kBAE5B2C,EAAc3C,YAAc2C,EAAc+D,aAAa,aACvD/D,EAAcgE,gBAAgB,aAElC,GD/KyB,SAAC3E,GACPO,MAAMC,KAAK5D,SAAS6D,iBAAiBT,EAAiByC,eAC9DrB,SAAQ,SAACtB,GAChBA,EAAY3B,iBAAiB,UAAU,SAAUyG,GAC/CA,EAAIC,gBACN,IACqBtE,MAAMC,KAAKV,EAAYW,iBAAiB,qBAChDW,SAAQ,SAAC0D,IAlBA,SAAChF,EAAaE,GACtC,IAAMM,EAAYC,MAAMC,KAAKV,EAAYW,iBAAiBT,EAAiBU,gBAC3EN,EAAkBN,EAAaE,GAC/BM,EAAUc,SAAQ,SAACrB,GACjBA,EAAa5B,iBAAiB,SAAS,SAAU4E,IAjB1B,SAACjD,EAAaC,EAAcC,GACjDD,EAAac,SAASkE,gBACxBhF,EAAaiF,kBAAkBjF,EAAakF,QAAQC,cAEpDnF,EAAaiF,kBAAkB,IAE5BjF,EAAac,SAASC,MAGzBjB,EAAeC,EAAaC,EAAcC,GAvBvB,SAACF,EAAaC,EAAcmF,EAAclF,GAC/D,IAAMC,EAAeH,EAAYjD,cAAc,IAADJ,OAAKsD,EAAa3B,GAAE,WAClE2B,EAAatB,UAAUC,IAAIsB,EAAiBE,iBAC5CD,EAAajC,YAAckH,EAC3BjF,EAAaxB,UAAUC,IAAIsB,EAAiBG,WAC9C,CAgBIgF,CAAerF,EAAaC,EAAcA,EAAaqF,kBAAmBpF,EAI9E,CAOMqF,CAAmBvF,EAAaC,EAAcC,GAC9CI,EAAkBN,EAAaE,EACjC,GACF,GACF,CAUMsF,CAAkBR,EAAU9E,EAC9B,GACF,GACF,CCsKAuF,CAAiBvF,GAEjB8B,EAAe3D,iBAAiB,UAlFhC,SAAuB4E,GH9FM,IAAChF,EAAMF,EG+FlCkF,EAAE8B,iBACFN,GAAc,EAAMzC,IHhGQ/D,EGkGfkE,EAAWoC,MHlGUxG,EGmGrBqE,EAASmC,MHlGftF,MAAM,GAADtC,OAAIV,EAAOC,QAAO,UAAU,CACtCgD,OAAQ,OACR/C,QAASF,EAAOE,QAChBuJ,KAAMC,KAAKC,UAAU,CAAE3H,KAAAA,EAAMF,KAAAA,MAC5BoB,KAAK9C,IGiGL8C,MAAK,SAAC6E,GACL,IAQMC,EAAUhH,EAAW,CACzBE,SATe,CACfmB,GAAI0F,EAAKvF,IACTI,QAASmF,EAAKE,MAAMzF,IACpBC,OAAQgE,EACRzE,KAAM+F,EAAK/F,KACXF,KAAMiG,EAAKjG,KACXI,MAAO6F,EAAK7F,OAIZf,SAAU2B,EACV1B,OAAQoC,EACRnC,aAAc6F,IAEhB5B,EAAesE,QAAQ5B,GACvBjC,EAAe8D,QACf/C,EAAWrB,EACb,IACCrC,OAAM,SAACC,GAAG,OAAKC,QAAQC,IAAIF,EAAI,IAC/ByG,SAAQ,WACPtB,GAAc,EAAOzC,EACvB,GACJ,IAoDAF,EAAgBzD,iBAAiB,UA1GjC,SAA4B4E,GHvFG,IAAChF,EAAM2F,EGwFpCX,EAAE8B,iBACFN,GAAc,EAAM3C,IHzFU7D,EG0FjBgE,EAAUsC,MH1FaX,EG2FhB1B,EAAiBqC,MH1F9BtF,MAAM,GAADtC,OAAIV,EAAOC,QAAO,aAAa,CACzCgD,OAAQ,QACR/C,QAASF,EAAOE,QAChBuJ,KAAMC,KAAKC,UAAU,CAAE3H,KAAAA,EAAM2F,MAAAA,MAC5BzE,KAAK9C,IGyFL8C,MAAK,SAACuE,GACL/B,EAAazD,YAAcwF,EAASzF,KACpC2D,EAAmB1D,YAAcwF,EAASE,MAC1Cb,EAAWlB,EACb,IACCxC,OAAM,SAACC,GAAG,OAAKC,QAAQC,IAAIF,EAAI,IAC/ByG,SAAQ,WACPtB,GAAc,EAAO3C,EACvB,GACJ,IA2FAU,EAAenE,iBAAiB,UA9ChC,SAA0B4E,GAGxB,IH/I8Bc,EG6I9Bd,EAAE8B,iBACFN,GAAc,EAAMjC,IH9IUuB,EG+IZxB,EAAgBgC,MH9I3BtF,MAAM,GAADtC,OAAIV,EAAOC,QAAO,oBAAoB,CAChDgD,OAAQ,QACR/C,QAASF,EAAOE,QAChBuJ,KAAMC,KAAKC,UAAU,CAAE7B,OAAAA,MACtB5E,KAAK9C,IG4IL8C,MAAK,SAAC6G,GACLvD,EAAcoB,MAAMC,gBAAkB,OAAHnH,OAAUqJ,EAAKjC,OAAM,KACxDvB,EAAesD,QACf/C,EAAWT,EACb,IACCjD,OAAM,SAACC,GAAG,OAAKC,QAAQC,IAAIF,EAAI,IAC/ByG,SAAQ,WACPtB,GAAc,EAAOjC,EACvB,GACJ,G","sources":["webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["const config = {\r\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-41\",\r\n  headers: {\r\n    authorization: \"143f916c-f045-4e3b-8db8-22feba489e0e\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\nexport const getUserDataApi = () => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    headers: config.headers,\r\n  }).then(getResponse);\r\n};\r\n\r\nexport const getCardsApi = () => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    headers: config.headers,\r\n  }).then(getResponse);\r\n};\r\n\r\nconst getResponse = (res) => {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Ошибка ${res.status}`);\r\n};\r\n\r\nexport const editUserDataApi = (name, about) => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({ name, about }),\r\n  }).then(getResponse);\r\n};\r\n\r\nexport const updateAvatarApi = (avatar) => {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({ avatar }),\r\n  }).then(getResponse);\r\n};\r\n\r\nexport const addNewCardApi = (name, link) => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: \"POST\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({ name, link }),\r\n  }).then(getResponse);\r\n};\r\n\r\nexport const setLikeApi = (cardId, isLiked) => {\r\n  const method = isLiked ? \"DELETE\" : \"PUT\";\r\n\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method,\r\n    headers: config.headers,\r\n  }).then(getResponse);\r\n};\r\n\r\nexport const deleteCardApi = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  }).then(getResponse);\r\n};\r\n","import { setLikeApi, deleteCardApi } from \"./api\";\r\n\r\nconst cardTemplate = document.querySelector(\"#card-template\").content;\r\n\r\nfunction createCard({ cardData, onDelete, onLike, onImageClick }) {\r\n  const cardElement = cardTemplate.querySelector(\".card\").cloneNode(true);\r\n  const cardImage = cardElement.querySelector(\".card__image\");\r\n  const cardTitle = cardElement.querySelector(\".card__title\");\r\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\r\n  const likeButton = cardElement.querySelector(\".card__like-button\");\r\n\r\n  const likesCount = cardElement.querySelector(\".card__like-count\");\r\n\r\n  cardImage.src = cardData.link;\r\n  cardImage.alt = cardData.name;\r\n  cardTitle.textContent = cardData.name;\r\n  likesCount.textContent = cardData.likes.length;\r\n\r\n  likeButton.addEventListener(\"click\", () => onLike(likeButton, cardData.id, likesCount));\r\n  cardImage.addEventListener(\"click\", () => onImageClick(cardImage, cardTitle));\r\n\r\n  const userHasLike = cardData.likes.some((like) => {\r\n    return like._id === cardData.userId;\r\n  });\r\n\r\n  if (userHasLike) {\r\n    likeButton.classList.add(\"card__like-button_is-active\");\r\n  }\r\n\r\n  if (cardData.ownerId !== cardData.userId) {\r\n    deleteButton.remove();\r\n  } else {\r\n    deleteButton.addEventListener(\"click\", () => onDelete(cardElement, cardData.id));\r\n  }\r\n  return cardElement;\r\n}\r\n\r\nfunction deleteCard(cardElement, cardId) {\r\n  deleteCardApi(cardId)\r\n    .then(() => {\r\n      cardElement.remove();\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Ошибка при удалении карточки: ${err}`);\r\n    });\r\n}\r\n\r\nfunction likeCard(likeButton, cardId, likesCount) {\r\n  const isLiked = likeButton.classList.contains(\"card__like-button_is-active\");\r\n\r\n  setLikeApi(cardId, isLiked)\r\n    .then((updatedCard) => {\r\n      likeButton.classList.toggle(\"card__like-button_is-active\");\r\n      likesCount.textContent = updatedCard.likes.length;\r\n    })\r\n    .catch((err) => console.log(err));\r\n}\r\n\r\nexport { createCard, deleteCard, likeCard };\r\n","export { clearValidation, enableValidation };\r\n\r\nconst showInputError = (formElement, inputElement, errorMessage, validationConfig) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.add(validationConfig.inputErrorClass);\r\n  errorElement.textContent = errorMessage;\r\n  errorElement.classList.add(validationConfig.errorClass);\r\n};\r\n\r\nconst hideInputError = (formElement, inputElement, validationConfig) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.remove(validationConfig.inputErrorClass);\r\n  errorElement.classList.remove(validationConfig.errorClass);\r\n  errorElement.textContent = \"\";\r\n};\r\n\r\nconst checkInputValidity = (formElement, inputElement, validationConfig) => {\r\n  if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  } else {\r\n    inputElement.setCustomValidity(\"\");\r\n  }\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(formElement, inputElement, inputElement.validationMessage, validationConfig);\r\n  } else {\r\n    hideInputError(formElement, inputElement, validationConfig);\r\n  }\r\n};\r\n\r\nconst setEventListeners = (formElement, validationConfig) => {\r\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n  toggleButtonState(formElement, validationConfig);\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener(\"input\", function (e) {\r\n      checkInputValidity(formElement, inputElement, validationConfig);\r\n      toggleButtonState(formElement, validationConfig);\r\n    });\r\n  });\r\n};\r\n\r\nconst enableValidation = (validationConfig) => {\r\n  const formList = Array.from(document.querySelectorAll(validationConfig.formSelector));\r\n  formList.forEach((formElement) => {\r\n    formElement.addEventListener(\"submit\", function (evt) {\r\n      evt.preventDefault();\r\n    });\r\n    const fieldsetList = Array.from(formElement.querySelectorAll(\".popup__form_set\"));\r\n    fieldsetList.forEach((fieldSet) => {\r\n      setEventListeners(fieldSet, validationConfig);\r\n    });\r\n  });\r\n};\r\n\r\nconst hasInvalidInput = (inputList) => {\r\n  return inputList.some((inputElement) => {\r\n    return !inputElement.validity.valid;\r\n  });\r\n};\r\n\r\nconst toggleButtonState = (fieldset, validationConfig) => {\r\n  const inputList = Array.from(fieldset.querySelectorAll(validationConfig.inputSelector));\r\n  const buttonElement = fieldset.querySelector(validationConfig.submitButtonSelector);\r\n  if (hasInvalidInput(inputList)) {\r\n    buttonElement.classList.add(validationConfig.inactiveButtonClass);\r\n    buttonElement.disabled = true;\r\n  } else {\r\n    buttonElement.classList.remove(validationConfig.inactiveButtonClass);\r\n    buttonElement.disabled = false;\r\n  }\r\n};\r\n\r\nconst clearValidation = (modal, validationConfig) => {\r\n  const fieldset = modal.querySelector(\".popup__form_set\");\r\n  const inputList = Array.from(modal.querySelectorAll(validationConfig.inputSelector));\r\n  inputList.forEach((inputElement) => {\r\n    hideInputError(fieldset, inputElement, validationConfig);\r\n  });\r\n  toggleButtonState(fieldset, validationConfig);\r\n};\r\n","import \"./pages/index.css\";\r\n\r\nimport { createCard, deleteCard, likeCard } from \"./components/card\";\r\nimport { clearValidation, enableValidation } from \"./components/validation\";\r\nimport {\r\n  getUserDataApi,\r\n  updateAvatarApi,\r\n  addNewCardApi,\r\n  getCardsApi,\r\n  editUserDataApi,\r\n} from \"./components/api\";\r\n\r\nconst container = document.querySelector(\".content\");\r\nconst cardsContainer = container.querySelector(\".places__list\");\r\nconst profileEditButton = document.querySelector(\".profile__edit-button\");\r\nconst profileAddButton = document.querySelector(\".profile__add-button\");\r\nconst profileAddModal = document.querySelector(\".popup_type_new-card\");\r\nconst profileTitle = document.querySelector(\".profile__title\");\r\nconst profileDescription = document.querySelector(\".profile__description\");\r\nconst profileEditModal = document.querySelector(\".popup_type_edit\");\r\nconst profileEditForm = document.forms[\"edit-profile\"];\r\nconst profileAddForm = document.forms[\"new-place\"];\r\nconst nameInput = profileEditForm.querySelector(\".popup__input_type_name\");\r\nconst descriptionInput = profileEditForm.querySelector(\".popup__input_type_description\");\r\nconst titleInput = profileAddForm.querySelector(\".popup__input_type_card-name\");\r\nconst urlInput = profileAddForm.querySelector(\".popup__input_type_url\");\r\nconst modalArray = document.querySelectorAll(\".popup\");\r\n\r\nconst avatarEditModal = document.querySelector(\".popup_type_avatar\");\r\nconst avatarEditInput = avatarEditModal.querySelector(\".popup__input_type_avatar\");\r\nconst avatarEditForm = document.forms[\"edit-avatar\"];\r\nconst profileAvatar = document.querySelector(\".profile__image\");\r\nlet currentUserId = null;\r\n\r\nconst validationConfig = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button_disabled\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  errorClass: \"popup__error_visible\",\r\n};\r\n\r\nfunction fillForm(inputsArray, dataArray) {\r\n  inputsArray.forEach((input, index) => {\r\n    input.value = dataArray[index].textContent;\r\n  });\r\n}\r\n\r\n/* initialCards.forEach((cardData) => {\r\n  const card = createCard({\r\n    cardData,\r\n    onDelete: deleteCard,\r\n    onLike: likeCard,\r\n    onImageClick: openCardModal,\r\n  });\r\n  cardsContainer.append(card);\r\n}); */\r\n\r\nPromise.all([getUserDataApi(), getCardsApi()])\r\n  .then(([userData, initialCards]) => {\r\n    profileTitle.textContent = userData.name;\r\n    profileDescription.textContent = userData.about;\r\n    profileAvatar.style.backgroundImage = `url(${userData.avatar})`;\r\n    currentUserId = userData._id;\r\n\r\n    initialCards.forEach((card) => {\r\n      const cardData = {\r\n        id: card._id,\r\n        ownerId: card.owner._id,\r\n        userId: currentUserId,\r\n        name: card.name,\r\n        link: card.link,\r\n        likes: card.likes,\r\n      };\r\n      const newCard = createCard({\r\n        cardData,\r\n        onDelete: deleteCard,\r\n        onLike: likeCard,\r\n        onImageClick: openCardModal,\r\n      });\r\n      cardsContainer.append(newCard);\r\n    });\r\n  })\r\n  .catch((err) => console.log(err));\r\n\r\nfunction openModal(modal) {\r\n  modal.classList.add(\"popup_is-animated\");\r\n  setTimeout(() => {\r\n    modal.classList.add(\"popup_is-opened\");\r\n  }, 1);\r\n  document.addEventListener(\"keydown\", handleEscClose);\r\n}\r\n\r\nfunction closeModal(modal) {\r\n  modal.classList.remove(\"popup_is-opened\");\r\n  document.removeEventListener(\"keydown\", handleEscClose);\r\n}\r\n\r\nfunction handleEscClose(e) {\r\n  if (e.key === \"Escape\") {\r\n    const modal = document.querySelector(\".popup_is-opened\");\r\n    if (modal) {\r\n      closeModal(modal);\r\n    }\r\n  }\r\n}\r\n\r\nprofileEditButton.addEventListener(\"click\", () => {\r\n  fillForm([nameInput, descriptionInput], [profileTitle, profileDescription]);\r\n  clearValidation(profileEditModal, validationConfig);\r\n  openModal(profileEditModal);\r\n});\r\n\r\nfunction handleEditUserData(e) {\r\n  e.preventDefault();\r\n  renderLoading(true, profileEditForm);\r\n  const name = nameInput.value;\r\n  const description = descriptionInput.value;\r\n\r\n  editUserDataApi(name, description)\r\n    .then((userData) => {\r\n      profileTitle.textContent = userData.name;\r\n      profileDescription.textContent = userData.about;\r\n      closeModal(profileEditModal);\r\n    })\r\n    .catch((err) => console.log(err))\r\n    .finally(() => {\r\n      renderLoading(false, profileEditForm);\r\n    });\r\n}\r\n\r\nprofileAddButton.addEventListener(\"click\", () => {\r\n  clearValidation(profileAddModal, validationConfig);\r\n  openModal(profileAddModal);\r\n});\r\n\r\nfunction handleAddCard(e) {\r\n  e.preventDefault();\r\n  renderLoading(true, profileAddForm);\r\n\r\n  const name = titleInput.value;\r\n  const link = urlInput.value;\r\n\r\n  addNewCardApi(name, link)\r\n    .then((card) => {\r\n      const cardData = {\r\n        id: card._id,\r\n        ownerId: card.owner._id,\r\n        userId: currentUserId,\r\n        name: card.name,\r\n        link: card.link,\r\n        likes: card.likes,\r\n      };\r\n      const newCard = createCard({\r\n        cardData,\r\n        onDelete: deleteCard,\r\n        onLike: likeCard,\r\n        onImageClick: openCardModal,\r\n      });\r\n      cardsContainer.prepend(newCard);\r\n      profileAddForm.reset();\r\n      closeModal(profileAddModal);\r\n    })\r\n    .catch((err) => console.log(err))\r\n    .finally(() => {\r\n      renderLoading(false, profileAddForm);\r\n    });\r\n}\r\n\r\nprofileAvatar.addEventListener(\"click\", () => {\r\n  clearValidation(avatarEditModal, validationConfig);\r\n  openModal(avatarEditModal);\r\n});\r\n\r\nfunction handleEditAvatar(e) {\r\n  e.preventDefault();\r\n  renderLoading(true, avatarEditForm);\r\n  const avatarUrl = avatarEditInput.value;\r\n  updateAvatarApi(avatarUrl)\r\n    .then((data) => {\r\n      profileAvatar.style.backgroundImage = `url(${data.avatar})`;\r\n      avatarEditForm.reset();\r\n      closeModal(avatarEditModal);\r\n    })\r\n    .catch((err) => console.log(err))\r\n    .finally(() => {\r\n      renderLoading(false, avatarEditForm);\r\n    });\r\n}\r\n\r\nmodalArray.forEach((modal) => {\r\n  modal.addEventListener(\"mousedown\", (e) => {\r\n    if (e.target === modal || e.target.classList.contains(\"popup__close\")) {\r\n      closeModal(modal);\r\n    }\r\n  });\r\n});\r\n\r\nfunction openCardModal(img, title, modal = document.querySelector(\".popup_type_image\")) {\r\n  modal.querySelector(\".popup__image\").src = img.src;\r\n  modal.querySelector(\".popup__image\").alt = img.alt;\r\n  modal.querySelector(\".popup__caption\").textContent = title.textContent;\r\n  openModal(modal);\r\n}\r\n\r\nconst renderLoading = (isLoading, formElement) => {\r\n  const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\r\n  if (isLoading) {\r\n    buttonElement.setAttribute(\"data-text\", buttonElement.textContent);\r\n    buttonElement.textContent = \"Сохранение...\";\r\n  } else {\r\n    buttonElement.textContent = buttonElement.getAttribute(\"data-text\");\r\n    buttonElement.removeAttribute(\"data-text\");\r\n  }\r\n};\r\n\r\nenableValidation(validationConfig);\r\n\r\nprofileAddForm.addEventListener(\"submit\", handleAddCard);\r\nprofileEditForm.addEventListener(\"submit\", handleEditUserData);\r\navatarEditForm.addEventListener(\"submit\", handleEditAvatar);\r\n"],"names":["config","baseUrl","headers","authorization","getResponse","res","ok","json","Promise","reject","concat","status","cardTemplate","document","querySelector","content","createCard","_ref","cardData","onDelete","onLike","onImageClick","cardElement","cloneNode","cardImage","cardTitle","deleteButton","likeButton","likesCount","src","link","alt","name","textContent","likes","length","addEventListener","id","some","like","_id","userId","classList","add","ownerId","remove","deleteCard","cardId","fetch","method","then","deleteCardApi","catch","err","console","log","likeCard","isLiked","setLikeApi","contains","updatedCard","toggle","hideInputError","formElement","inputElement","validationConfig","errorElement","inputErrorClass","errorClass","toggleButtonState","fieldset","inputList","Array","from","querySelectorAll","inputSelector","buttonElement","submitButtonSelector","validity","valid","hasInvalidInput","inactiveButtonClass","disabled","clearValidation","modal","forEach","cardsContainer","profileEditButton","profileAddButton","profileAddModal","profileTitle","profileDescription","profileEditModal","profileEditForm","forms","profileAddForm","nameInput","descriptionInput","titleInput","urlInput","modalArray","avatarEditModal","avatarEditInput","avatarEditForm","profileAvatar","currentUserId","formSelector","openModal","setTimeout","handleEscClose","closeModal","removeEventListener","e","key","openCardModal","img","title","arguments","undefined","all","_ref2","userData","initialCards","about","style","backgroundImage","avatar","card","newCard","owner","append","dataArray","input","index","value","target","renderLoading","isLoading","setAttribute","getAttribute","removeAttribute","evt","preventDefault","fieldSet","patternMismatch","setCustomValidity","dataset","errorMessage","showInputError","validationMessage","checkInputValidity","setEventListeners","enableValidation","body","JSON","stringify","prepend","reset","finally","data"],"sourceRoot":""}