{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/webpack/bootstrap","webpack://mesto-project-ff/webpack/runtime/define property getters","webpack://mesto-project-ff/webpack/runtime/hasOwnProperty shorthand","webpack://mesto-project-ff/./src/components/api.js","webpack://mesto-project-ff/./src/components/card.js","webpack://mesto-project-ff/./src/components/validation.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const config = {\r\n  baseUrl: \"https://nomoreparties.co/v1/wff-cohort-41\",\r\n  headers: {\r\n    authorization: \"143f916c-f045-4e3b-8db8-22feba489e0e\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n};\r\n\r\nexport const getUserDataApi = () => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    headers: config.headers,\r\n  }).then(getResponse);\r\n};\r\n\r\nexport const getCardsApi = () => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    headers: config.headers,\r\n  }).then(getResponse);\r\n};\r\n\r\nconst getResponse = (res) => {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Ошибка ${res.status}`);\r\n};\r\n\r\nexport const editUserDataApi = (name, about) => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({ name, about }),\r\n  }).then(getResponse);\r\n};\r\n\r\nexport const updateAvatarApi = (avatar) => {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: \"PATCH\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({ avatar }),\r\n  }).then(getResponse);\r\n};\r\n\r\nexport const addNewCardApi = (name, link) => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: \"POST\",\r\n    headers: config.headers,\r\n    body: JSON.stringify({ name, link }),\r\n  }).then(getResponse);\r\n};\r\n\r\nexport const setLikeApi = (cardId, isLiked) => {\r\n  const method = isLiked ? \"DELETE\" : \"PUT\";\r\n\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method,\r\n    headers: config.headers,\r\n  }).then(getResponse);\r\n};\r\n\r\nexport const deleteCardApi = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: \"DELETE\",\r\n    headers: config.headers,\r\n  }).then(getResponse);\r\n};\r\n","import { setLikeApi, deleteCardApi } from \"./api\";\r\nimport { renderLoading, deleteForm, closeModal, deleteModal } from \"../index.js\";\r\n\r\nconst cardTemplate = document.querySelector(\"#card-template\").content;\r\n\r\nfunction createCard({ cardData, onDelete, onLike, onImageClick }) {\r\n  const cardElement = cardTemplate.querySelector(\".card\").cloneNode(true);\r\n  const cardImage = cardElement.querySelector(\".card__image\");\r\n  const cardTitle = cardElement.querySelector(\".card__title\");\r\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\r\n  const likeButton = cardElement.querySelector(\".card__like-button\");\r\n\r\n  const likesCount = cardElement.querySelector(\".card__like-count\");\r\n\r\n  cardImage.src = cardData.link;\r\n  cardImage.alt = cardData.name;\r\n  cardTitle.textContent = cardData.name;\r\n  likesCount.textContent = cardData.likes.length;\r\n\r\n  likeButton.addEventListener(\"click\", () => onLike(likeButton, cardData.id, likesCount));\r\n  cardImage.addEventListener(\"click\", () => onImageClick(cardImage, cardTitle));\r\n\r\n  const userHasLike = cardData.likes.some((like) => {\r\n    return like._id === cardData.userId;\r\n  });\r\n\r\n  if (userHasLike) {\r\n    likeButton.classList.add(\"card__like-button_is-active\");\r\n  }\r\n\r\n  if (cardData.ownerId !== cardData.userId) {\r\n    deleteButton.remove();\r\n  } else {\r\n    deleteButton.addEventListener(\"click\", () => onDelete(cardElement, cardData.id));\r\n  }\r\n  return cardElement;\r\n}\r\n\r\nfunction deleteCard(cardElement, cardId) {\r\n  deleteCardApi(cardId)\r\n    .then(() => {\r\n      cardElement.remove();\r\n      renderLoading(false, deleteForm);\r\n      closeModal(deleteModal);\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Ошибка при удалении карточки: ${err}`);\r\n    });\r\n}\r\n\r\nfunction likeCard(likeButton, cardId, likesCount) {\r\n  const isLiked = likeButton.classList.contains(\"card__like-button_is-active\");\r\n\r\n  setLikeApi(cardId, isLiked)\r\n    .then((updatedCard) => {\r\n      likeButton.classList.toggle(\"card__like-button_is-active\");\r\n      likesCount.textContent = updatedCard.likes.length;\r\n    })\r\n    .catch((err) => console.log(err));\r\n}\r\n\r\nexport { createCard, deleteCard, likeCard };\r\n","export { clearValidation, enableValidation };\r\n\r\nconst showInputError = (formElement, inputElement, errorMessage, validationConfig) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.add(validationConfig.inputErrorClass);\r\n  errorElement.textContent = errorMessage;\r\n  errorElement.classList.add(validationConfig.errorClass);\r\n};\r\n\r\nconst hideInputError = (formElement, inputElement, validationConfig) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.remove(validationConfig.inputErrorClass);\r\n  errorElement.classList.remove(validationConfig.errorClass);\r\n  errorElement.textContent = \"\";\r\n};\r\n\r\nconst checkInputValidity = (formElement, inputElement, validationConfig) => {\r\n  if (inputElement.validity.patternMismatch) {\r\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\r\n  } else {\r\n    inputElement.setCustomValidity(\"\");\r\n  }\r\n  if (!inputElement.validity.valid) {\r\n    showInputError(formElement, inputElement, inputElement.validationMessage, validationConfig);\r\n  } else {\r\n    hideInputError(formElement, inputElement, validationConfig);\r\n  }\r\n};\r\n\r\nconst setEventListeners = (formElement, validationConfig) => {\r\n  const inputList = Array.from(formElement.querySelectorAll(validationConfig.inputSelector));\r\n  toggleButtonState(formElement, validationConfig);\r\n  inputList.forEach((inputElement) => {\r\n    inputElement.addEventListener(\"input\", function (e) {\r\n      checkInputValidity(formElement, inputElement, validationConfig);\r\n      toggleButtonState(formElement, validationConfig);\r\n    });\r\n  });\r\n};\r\n\r\nconst enableValidation = (validationConfig) => {\r\n  const formList = Array.from(document.querySelectorAll(validationConfig.formSelector));\r\n  formList.forEach((formElement) => {\r\n    formElement.addEventListener(\"submit\", function (evt) {\r\n      evt.preventDefault();\r\n    });\r\n    const fieldsetList = Array.from(formElement.querySelectorAll(\".popup__form_set\"));\r\n    fieldsetList.forEach((fieldSet) => {\r\n      setEventListeners(fieldSet, validationConfig);\r\n    });\r\n  });\r\n};\r\n\r\nconst hasInvalidInput = (inputList) => {\r\n  return inputList.some((inputElement) => {\r\n    return !inputElement.validity.valid;\r\n  });\r\n};\r\n\r\nconst toggleButtonState = (fieldset, validationConfig) => {\r\n  const inputList = Array.from(fieldset.querySelectorAll(validationConfig.inputSelector));\r\n  const buttonElement = fieldset.querySelector(validationConfig.submitButtonSelector);\r\n  if (hasInvalidInput(inputList)) {\r\n    buttonElement.classList.add(validationConfig.inactiveButtonClass);\r\n    buttonElement.disabled = true;\r\n  } else {\r\n    buttonElement.classList.remove(validationConfig.inactiveButtonClass);\r\n    buttonElement.disabled = false;\r\n  }\r\n};\r\n\r\nconst clearValidation = (modal, validationConfig) => {\r\n  const fieldset = modal.querySelector(\".popup__form_set\");\r\n  const inputList = Array.from(modal.querySelectorAll(validationConfig.inputSelector));\r\n  inputList.forEach((inputElement) => {\r\n    hideInputError(fieldset, inputElement, validationConfig);\r\n  });\r\n  toggleButtonState(fieldset, validationConfig);\r\n};\r\n","import \"./pages/index.css\";\r\n\r\nimport { createCard, deleteCard, likeCard } from \"./components/card\";\r\nimport { clearValidation, enableValidation } from \"./components/validation\";\r\nimport {\r\n  getUserDataApi,\r\n  updateAvatarApi,\r\n  addNewCardApi,\r\n  getCardsApi,\r\n  editUserDataApi,\r\n} from \"./components/api\";\r\n\r\nconst container = document.querySelector(\".content\");\r\nconst cardsContainer = container.querySelector(\".places__list\");\r\nconst profileEditButton = document.querySelector(\".profile__edit-button\");\r\nexport const deleteModal = document.querySelector(\".popup_type_delete\");\r\nexport const deleteForm = document.forms[\"confirm-delete-card\"];\r\nconst profileAddButton = document.querySelector(\".profile__add-button\");\r\nconst profileAddModal = document.querySelector(\".popup_type_new-card\");\r\nconst profileTitle = document.querySelector(\".profile__title\");\r\nconst profileDescription = document.querySelector(\".profile__description\");\r\nconst profileEditModal = document.querySelector(\".popup_type_edit\");\r\nconst profileEditForm = document.forms[\"edit-profile\"];\r\nconst profileAddForm = document.forms[\"new-place\"];\r\nconst nameInput = profileEditForm.querySelector(\".popup__input_type_name\");\r\nconst descriptionInput = profileEditForm.querySelector(\".popup__input_type_description\");\r\nconst titleInput = profileAddForm.querySelector(\".popup__input_type_card-name\");\r\nconst urlInput = profileAddForm.querySelector(\".popup__input_type_url\");\r\nconst modalArray = document.querySelectorAll(\".popup\");\r\n\r\nconst avatarEditModal = document.querySelector(\".popup_type_avatar\");\r\nconst avatarEditInput = avatarEditModal.querySelector(\".popup__input_type_avatar\");\r\nconst avatarEditForm = document.forms[\"edit-avatar\"];\r\nconst profileAvatar = document.querySelector(\".profile__image\");\r\nlet currentUserId = null;\r\n\r\nconst validationConfig = {\r\n  formSelector: \".popup__form\",\r\n  inputSelector: \".popup__input\",\r\n  submitButtonSelector: \".popup__button\",\r\n  inactiveButtonClass: \"popup__button_disabled\",\r\n  inputErrorClass: \"popup__input_type_error\",\r\n  errorClass: \"popup__error_visible\",\r\n};\r\n\r\nfunction fillForm(inputsArray, dataArray) {\r\n  inputsArray.forEach((input, index) => {\r\n    input.value = dataArray[index].textContent;\r\n  });\r\n}\r\n\r\nPromise.all([getUserDataApi(), getCardsApi()])\r\n  .then(([userData, initialCards]) => {\r\n    profileTitle.textContent = userData.name;\r\n    profileDescription.textContent = userData.about;\r\n    profileAvatar.style.backgroundImage = `url(${userData.avatar})`;\r\n    currentUserId = userData._id;\r\n\r\n    initialCards.forEach((card) => {\r\n      const cardData = {\r\n        id: card._id,\r\n        ownerId: card.owner._id,\r\n        userId: currentUserId,\r\n        name: card.name,\r\n        link: card.link,\r\n        likes: card.likes,\r\n      };\r\n      const newCard = createCard({\r\n        cardData,\r\n        onDelete: confirmDelete,\r\n        onLike: likeCard,\r\n        onImageClick: openCardModal,\r\n      });\r\n      cardsContainer.append(newCard);\r\n    });\r\n  })\r\n  .catch((err) => console.log(err));\r\n\r\nfunction openModal(modal) {\r\n  modal.classList.add(\"popup_is-opened\");\r\n  document.addEventListener(\"keydown\", handleEscClose);\r\n}\r\n\r\nexport function closeModal(modal) {\r\n  modal.classList.remove(\"popup_is-opened\");\r\n  document.removeEventListener(\"keydown\", handleEscClose);\r\n}\r\n\r\nfunction confirmDelete(cardElement, cardId) {\r\n  openModal(deleteModal);\r\n  cardElement.setAttribute(\"id\", \"card_\" + Date.now());\r\n  deleteForm.dataset.cardId = cardId;\r\n  deleteForm.dataset.cardElementId = cardElement.id;\r\n}\r\n\r\nfunction handleDeleteCard(e) {\r\n  e.preventDefault();\r\n  renderLoading(true, deleteForm);\r\n  const cardId = deleteForm.dataset.cardId;\r\n  const cardElement = document.getElementById(deleteForm.dataset.cardElementId);\r\n  deleteCard(cardElement, cardId);\r\n}\r\n\r\nfunction handleEscClose(e) {\r\n  if (e.key === \"Escape\") {\r\n    const modal = document.querySelector(\".popup_is-opened\");\r\n    if (modal) {\r\n      closeModal(modal);\r\n    }\r\n  }\r\n}\r\n\r\nprofileEditButton.addEventListener(\"click\", () => {\r\n  fillForm([nameInput, descriptionInput], [profileTitle, profileDescription]);\r\n  clearValidation(profileEditModal, validationConfig);\r\n  openModal(profileEditModal);\r\n});\r\n\r\nfunction handleEditUserData(e) {\r\n  e.preventDefault();\r\n  renderLoading(true, profileEditForm);\r\n  const name = nameInput.value;\r\n  const description = descriptionInput.value;\r\n\r\n  editUserDataApi(name, description)\r\n    .then((userData) => {\r\n      profileTitle.textContent = userData.name;\r\n      profileDescription.textContent = userData.about;\r\n      closeModal(profileEditModal);\r\n    })\r\n    .catch((err) => console.log(err))\r\n    .finally(() => {\r\n      renderLoading(false, profileEditForm);\r\n    });\r\n}\r\n\r\nprofileAddButton.addEventListener(\"click\", () => {\r\n  clearValidation(profileAddModal, validationConfig);\r\n  openModal(profileAddModal);\r\n});\r\n\r\nfunction handleAddCard(e) {\r\n  e.preventDefault();\r\n  renderLoading(true, profileAddForm);\r\n\r\n  const name = titleInput.value;\r\n  const link = urlInput.value;\r\n\r\n  addNewCardApi(name, link)\r\n    .then((card) => {\r\n      const cardData = {\r\n        id: card._id,\r\n        ownerId: card.owner._id,\r\n        userId: currentUserId,\r\n        name: card.name,\r\n        link: card.link,\r\n        likes: card.likes,\r\n      };\r\n      const newCard = createCard({\r\n        cardData,\r\n        onDelete: confirmDelete,\r\n        onLike: likeCard,\r\n        onImageClick: openCardModal,\r\n      });\r\n      cardsContainer.prepend(newCard);\r\n      profileAddForm.reset();\r\n      closeModal(profileAddModal);\r\n    })\r\n    .catch((err) => console.log(err))\r\n    .finally(() => {\r\n      renderLoading(false, profileAddForm);\r\n    });\r\n}\r\n\r\nprofileAvatar.addEventListener(\"click\", () => {\r\n  clearValidation(avatarEditModal, validationConfig);\r\n  openModal(avatarEditModal);\r\n});\r\n\r\nfunction handleEditAvatar(e) {\r\n  e.preventDefault();\r\n  renderLoading(true, avatarEditForm);\r\n  const avatarUrl = avatarEditInput.value;\r\n  updateAvatarApi(avatarUrl)\r\n    .then((data) => {\r\n      profileAvatar.style.backgroundImage = `url(${data.avatar})`;\r\n      avatarEditForm.reset();\r\n      closeModal(avatarEditModal);\r\n    })\r\n    .catch((err) => console.log(err))\r\n    .finally(() => {\r\n      renderLoading(false, avatarEditForm);\r\n    });\r\n}\r\n\r\nmodalArray.forEach((modal) => {\r\n  modal.addEventListener(\"mousedown\", (e) => {\r\n    if (e.target === modal || e.target.classList.contains(\"popup__close\")) {\r\n      closeModal(modal);\r\n    }\r\n  });\r\n});\r\n\r\nfunction openCardModal(img, title, modal = document.querySelector(\".popup_type_image\")) {\r\n  modal.querySelector(\".popup__image\").src = img.src;\r\n  modal.querySelector(\".popup__image\").alt = img.alt;\r\n  modal.querySelector(\".popup__caption\").textContent = title.textContent;\r\n  openModal(modal);\r\n}\r\n\r\nexport const renderLoading = (isLoading, formElement) => {\r\n  const buttonElement = formElement.querySelector(validationConfig.submitButtonSelector);\r\n  if (isLoading) {\r\n    buttonElement.setAttribute(\"data-text\", buttonElement.textContent);\r\n    buttonElement.textContent = \"Сохранение...\";\r\n  } else {\r\n    buttonElement.textContent = buttonElement.getAttribute(\"data-text\");\r\n    buttonElement.removeAttribute(\"data-text\");\r\n  }\r\n};\r\n\r\nprofileAddForm.addEventListener(\"submit\", handleAddCard);\r\nprofileEditForm.addEventListener(\"submit\", handleEditUserData);\r\navatarEditForm.addEventListener(\"submit\", handleEditAvatar);\r\ndeleteForm.addEventListener(\"submit\", handleDeleteCard);\r\n\r\nenableValidation(validationConfig);\r\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","config","baseUrl","headers","authorization","getResponse","res","ok","json","Promise","reject","concat","status","cardTemplate","document","querySelector","content","createCard","_ref","cardData","onDelete","onLike","onImageClick","cardElement","cloneNode","cardImage","cardTitle","deleteButton","likeButton","likesCount","src","link","alt","name","textContent","likes","length","addEventListener","id","some","like","_id","userId","classList","add","ownerId","remove","likeCard","cardId","isLiked","method","fetch","then","setLikeApi","contains","updatedCard","toggle","catch","err","console","log","hideInputError","formElement","inputElement","validationConfig","errorElement","inputErrorClass","errorClass","toggleButtonState","fieldset","inputList","Array","from","querySelectorAll","inputSelector","buttonElement","submitButtonSelector","validity","valid","hasInvalidInput","inactiveButtonClass","disabled","clearValidation","modal","forEach","cardsContainer","profileEditButton","deleteModal","deleteForm","forms","profileAddButton","profileAddModal","profileTitle","profileDescription","profileEditModal","profileEditForm","profileAddForm","nameInput","descriptionInput","titleInput","urlInput","modalArray","avatarEditModal","avatarEditInput","avatarEditForm","profileAvatar","currentUserId","formSelector","openModal","handleEscClose","closeModal","removeEventListener","confirmDelete","setAttribute","Date","now","dataset","cardElementId","e","openCardModal","img","title","arguments","undefined","all","_ref2","userData","initialCards","about","style","backgroundImage","avatar","card","newCard","owner","append","dataArray","input","index","value","target","renderLoading","isLoading","getAttribute","removeAttribute","preventDefault","body","JSON","stringify","prepend","reset","finally","data","deleteCardApi","deleteCard","getElementById","evt","fieldSet","patternMismatch","setCustomValidity","errorMessage","showInputError","validationMessage","checkInputValidity","setEventListeners","enableValidation"],"sourceRoot":""}